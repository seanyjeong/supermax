<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í•™êµ ì„¸ë¶€ ì •ë³´ ì…ë ¥</title>
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    body {
      font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 20px;
      color: #333;
      line-height: 1.6;
    }
    
    h1, h2, h3 {
      color: #2c3e50;
      margin-bottom: 20px;
    }
    
    h1 {
      text-align: center;
      font-size: 28px;
      padding-bottom: 15px;
      border-bottom: 2px solid #3498db;
    }
    
    h2 {
      font-size: 24px;
      text-align: center;
      margin-top: 30px;
    }
    
    h3 {
      font-size: 18px;
      color: #2980b9;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
      margin-top: 25px;
    }
    
    /* ì„ íƒ ì˜ì—­ ìŠ¤íƒ€ì¼ */
    .select-container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      max-width: 800px;
      margin: 0 auto 30px;
      text-align: center;
    }
    
    .select-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .select-row label {
      font-weight: bold;
      font-size: 18px;
      margin: 0;
    }
    
    select {
      font-size: 16px;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
      min-width: 400px;
      max-width: 100%;
    }
    
    /* í¼ ìŠ¤íƒ€ì¼ */
    #detailForm {
      max-width: 900px;
      margin: 30px auto;
      display: none;
    }
    
    .form-card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 15px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
      color: #444;
    }
    
    input[type="text"], 
    input[type="number"], 
    select {
      width: 90%0%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      transition: border 0.3s;
    }
    
    input[type="text"]:focus, 
    input[type="number"]:focus, 
    select:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    button {
      padding: 8px 16px;
      margin: 0 5px 8px 0;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    /* ê¸°ë³¸ ë²„íŠ¼ (ì´ˆë¡ìƒ‰) */
    button:not(.subject-btn):not(.special-btn):not(.ratio-btn) {
      background-color: #2ecc71;
      color: white;
    }
    
    button:not(.subject-btn):not(.special-btn):not(.ratio-btn):hover {
      background-color: #27ae60;
    }
    
    /* ê³¼ëª© ë²„íŠ¼ (íŒŒë€ìƒ‰) */
    .subject-btn {
      background-color: #3498db;
      color: white;
    }
    
    .subject-btn:hover {
      background-color: #2980b9;
    }
    
    /* íŠ¹ìˆ˜ ê¸°ëŠ¥ ë²„íŠ¼ (ì£¼í™©ìƒ‰) */
    .special-btn {
      background-color: #e67e22;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
    }
    
    .special-btn:hover {
      background-color: #d35400;
    }
    
    /* ë¹„ìœ¨ ë²„íŠ¼ (ë³´ë¼ìƒ‰) */
    .ratio-btn {
      background-color: #9b59b6;
      color: white;
      padding: 6px 10px;
      min-width: 40px;
    }
    
    .ratio-btn:hover {
      background-color: #8e44ad;
    }
    
    /* ì œì¶œ ë²„íŠ¼ */
    button[type="submit"] {
      background-color: #3498db;
      color: white;
      padding: 12px 25px;
      font-size: 16px;
      display: block;
      margin: 30px auto 0;
      width: 200px;
    }
    
    button[type="submit"]:hover {
      background-color: #2980b9;
    }
    
    /* ë²„íŠ¼ ê·¸ë£¹ */
    .button-group {
      display: inline-block;
      margin-left: 10px;
    }
    
    /* ê³¼ëª© ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
    .subject-buttons-container {
      margin: 10px 0 15px;
    }
    
    /* ë¹„ìœ¨ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
    .ratio-buttons-container {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin: 10px 0;
    }
    
    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
      .select-row {
        flex-direction: column;
        align-items: stretch;
      }
      
      select {
        min-width: 100%;
      }
      
      .form-card {
        padding: 15px;
      }
    }
    
    /* íŠ¹ìˆ˜ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
    .section-title {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .section-title h3 {
      margin: 0;
      border: none;
      padding: 0;
    }
    
    /* í”Œë ˆì´ìŠ¤í™€ë” ìŠ¤íƒ€ì¼ */
    ::placeholder {
      color: #aaa;
      opacity: 1;
    }
    
    /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
<h1>í•™êµ ì„¸ë¶€ ì •ë³´ ì…ë ¥</h1>

<div class="select-container">
  <div class="select-row">
    <label for="schoolSelect">í•™êµ ì„ íƒ:</label>
    <select id="schoolSelect">
      <option value="">í•™êµë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
    </select>
  </div>
</div>

<div id="detailForm">
  <div style="text-align:center; margin-bottom:25px;">
    <button type="button" class="special-btn" onclick="fillZero()">íŠ¹ìˆ˜ê³„ì‚°í•™êµ</button>
  </div>

  <form id="detailInputForm">
    <div class="form-card">
      <h3>ğŸ”¹ ê¸°ë³¸ì •ë³´</h3>
      
      <div class="grid-container">
        <div class="form-group">
          <label>íƒêµ¬ê³¼ëª© ë°˜ì˜ìˆ˜:</label>
          <input type="number" id="íƒêµ¬ê³¼ëª©ë°˜ì˜ìˆ˜" required>
        </div>
        
        <div class="form-group">
          <label>í•œêµ­ì‚¬ ë°˜ì˜ë°©ì‹:</label>
          <input type="text" id="í•œêµ­ì‚¬ë°˜ì˜" required>
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ë°˜ì˜','í•„ìˆ˜ì‘ì‹œ')">í•„ìˆ˜ì‘ì‹œ</button>
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ë°˜ì˜','ê°€ì‚°ì ')">ê°€ì‚°ì </button>
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ë°˜ì˜','ë¯¹ìŠ¤')">ë¯¹ìŠ¤</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>í•œêµ­ì‚¬ ê°€ì‚°ì  ì²˜ë¦¬:</label>
          <input type="text" id="í•œêµ­ì‚¬ê°€ì‚°ì²˜ë¦¬">
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ê°€ì‚°ì²˜ë¦¬','ìˆ˜ëŠ¥í™˜ì‚°')">ìˆ˜ëŠ¥í™˜ì‚°</button>
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ê°€ì‚°ì²˜ë¦¬','ì§ì ‘ë”í•¨')">ì§ì ‘ë”í•¨</button>
            <button type="button" onclick="setValue('í•œêµ­ì‚¬ê°€ì‚°ì²˜ë¦¬','ë°˜ì˜ì—†ìŒ')">ë°˜ì˜ì—†ìŒ</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>êµ­ìˆ˜ì˜ ë°˜ì˜ì§€í‘œ:</label>
          <input type="text" id="êµ­ìˆ˜ì˜ë°˜ì˜ì§€í‘œ" required>
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('êµ­ìˆ˜ì˜ë°˜ì˜ì§€í‘œ','ë°±')">ë°±</button>
            <button type="button" onclick="setValue('êµ­ìˆ˜ì˜ë°˜ì˜ì§€í‘œ','í‘œ')">í‘œ</button>
            <button type="button" onclick="setValue('êµ­ìˆ˜ì˜ë°˜ì˜ì§€í‘œ','ë“±ê¸‰')">ë“±ê¸‰</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>íƒêµ¬ ë°˜ì˜ì§€í‘œ:</label>
          <input type="text" id="íƒêµ¬ë°˜ì˜ì§€í‘œ" required>
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('íƒêµ¬ë°˜ì˜ì§€í‘œ','ë°±')">ë°±</button>
            <button type="button" onclick="setValue('íƒêµ¬ë°˜ì˜ì§€í‘œ','í‘œ')">í‘œ</button>
            <button type="button" onclick="setValue('íƒêµ¬ë°˜ì˜ì§€í‘œ','ë“±ê¸‰')">ë“±ê¸‰</button>
            <button type="button" onclick="setValue('íƒêµ¬ë°˜ì˜ì§€í‘œ','ë°±ìí‘œ')">ë°±ìí‘œ</button>
            <button type="button" onclick="setValue('íƒêµ¬ë°˜ì˜ì§€í‘œ','ë°˜ì˜ì—†ìŒ')">ë°˜ì˜ì—†ìŒ</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€:</label>
          <input type="text" id="í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€">
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€','ìµœê³ ì ')">ìµœê³ ì </button>
            <button type="button" onclick="setValue('í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€','200')">200</button>
            <button type="button" onclick="setValue('í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€','ë§Œì ')">ë§Œì </button>
            <button type="button" onclick="setValue('í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€','ê¸°ë³¸')">ê¸°ë³¸</button>
            <button type="button" onclick="setValue('í‘œì¤€ì ìˆ˜ë°˜ì˜ê¸°ì¤€','0')">í‘œì ì•„ë‹˜</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì :</label>
          <input type="text" id="ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì ">
          <div class="subject-buttons-container">
            <button type="button" onclick="setValue('ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì ','ìµœê³ ì ')">ìµœê³ ì </button>
            <button type="button" onclick="setValue('ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì ','200')">200</button>
            <button type="button" onclick="setValue('ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì ','100')">100</button>
            <button type="button" onclick="setValue('ì˜ì–´í‘œì¤€ì ìˆ˜ë§Œì ','0')">í‘œì ì•„ë‹˜</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>ê³¼ëª© ë¦¬ìŠ¤íŠ¸ (JSON í˜•ì‹):</label>
          <input type="text" id="ê³¼ëª©" required>
          <div id="ê³¼ëª©ë²„íŠ¼" class="subject-buttons-container"></div>
        </div>
        
        <div class="form-group">
          <label>ë°˜ì˜ê³¼ëª©ìˆ˜:</label>
          <input type="number" id="ë°˜ì˜ê³¼ëª©ìˆ˜" required>
        </div>
        
        <div class="form-group">
          <label>ë°˜ì˜ê·œì¹™:</label>
          <input type="text" id="ë°˜ì˜ê·œì¹™" required>
          <div class="subject-buttons-container">
            <button type="button" onclick="setRule('default')">default</button>
            <button type="button" onclick="setRule('rank')">rank</button>
            <button type="button" onclick="setRule('mix')">mix</button>
          </div>
        </div>
        
        <div class="form-group">
          <label>ë°˜ì˜ë¹„ìœ¨ (JSON í˜•ì‹):</label>
          <input type="text" id="ë°˜ì˜ë¹„ìœ¨">
          <div class="ratio-buttons-container" id="ratioButtons">
            <!-- ë¹„ìœ¨ ë²„íŠ¼ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
          </div>
        </div>
      </div>
    </div>

    <div class="form-card">
      <h3>ğŸ”¹ ê°€ì‚°ì  ì…ë ¥</h3>
      <div class="grid-container">
        <div class="form-group">
          <label>ìˆ˜í•™ ê°€ì‚°ì :</label>
          <input type="number" id="ìˆ˜í•™ê°€ì‚°ì " value="0">
        </div>
        
        <div class="form-group">
          <label>ê³¼íƒ ê°€ì‚°ì :</label>
          <input type="number" id="ê³¼íƒê°€ì‚°ì " value="0">
        </div>
      </div>
    </div>

    <div class="form-card">
      <h3>ğŸ”¹ ê·¸ë£¹1 ê³¼ëª© ì…ë ¥</h3>
      <div class="grid-container">
        <div class="form-group">
          <label>ê·¸ë£¹1 ê³¼ëª© ë¦¬ìŠ¤íŠ¸ (JSON):</label>
          <input type="text" id="ê·¸ë£¹1_ê³¼ëª©">
          <div id="ê·¸ë£¹1ë²„íŠ¼" class="subject-buttons-container"></div>
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹1 ì„ íƒê°œìˆ˜:</label>
          <input type="number" id="ê·¸ë£¹1_ì„ íƒê°œìˆ˜">
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹1 ë°˜ì˜ë¹„ìœ¨ (JSON):</label>
          <input type="text" id="ê·¸ë£¹1_ë°˜ì˜ë¹„ìœ¨" placeholder='[30, 35]'>
          <div class="ratio-buttons-container" id="ratioButtonsGroup1"></div>
        </div>
      </div>
    </div>

    <div class="form-card">
      <h3>ğŸ”¹ ê·¸ë£¹2 ê³¼ëª© ì…ë ¥</h3>
      <div class="grid-container">
        <div class="form-group">
          <label>ê·¸ë£¹2 ê³¼ëª© ë¦¬ìŠ¤íŠ¸ (JSON):</label>
          <input type="text" id="ê·¸ë£¹2_ê³¼ëª©">
          <div id="ê·¸ë£¹2ë²„íŠ¼" class="subject-buttons-container"></div>
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹2 ì„ íƒê°œìˆ˜:</label>
          <input type="number" id="ê·¸ë£¹2_ì„ íƒê°œìˆ˜">
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹2 ë°˜ì˜ë¹„ìœ¨ (JSON):</label>
          <input type="text" id="ê·¸ë£¹2_ë°˜ì˜ë¹„ìœ¨" placeholder='[30, 35]'>
          <div class="ratio-buttons-container" id="ratioButtonsGroup2"></div>
        </div>
      </div>
    </div>

    <div class="form-card">
      <h3>ğŸ”¹ ê·¸ë£¹3 ê³¼ëª© ì…ë ¥</h3>
      <div class="grid-container">
        <div class="form-group">
          <label>ê·¸ë£¹3 ê³¼ëª© ë¦¬ìŠ¤íŠ¸ (JSON):</label>
          <input type="text" id="ê·¸ë£¹3_ê³¼ëª©">
          <div id="ê·¸ë£¹3ë²„íŠ¼" class="subject-buttons-container"></div>
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹3 ì„ íƒê°œìˆ˜:</label>
          <input type="number" id="ê·¸ë£¹3_ì„ íƒê°œìˆ˜">
        </div>
        
        <div class="form-group">
          <label>ê·¸ë£¹3 ë°˜ì˜ë¹„ìœ¨ (JSON):</label>
          <input type="text" id="ê·¸ë£¹3_ë°˜ì˜ë¹„ìœ¨" placeholder='[30, 35]'>
          <div class="ratio-buttons-container" id="ratioButtonsGroup3"></div>
        </div>
      </div>
    </div>

    <button type="submit">ì„¸ë¶€ì •ë³´ ë“±ë¡</button>
  </form>
</div>

<script>
// ğŸ”¥ input ì „ë¶€ 0ìœ¼ë¡œ ì±„ìš°ëŠ” í•¨ìˆ˜ ì¶”ê°€
function fillZero() {
  document.querySelectorAll('#detailInputForm input').forEach(input => {
    if (input.type === 'number' || input.type === 'text') {
      input.value = 0;
    }
  });
}

// ë°˜ì˜ê·œì¹™ ì„¤ì • í•¨ìˆ˜ (mix ì„ íƒì‹œ ê´€ë ¨ í•„ë“œ 0ìœ¼ë¡œ ì„¤ì •)
function setRule(rule) {
  const ë°˜ì˜ê·œì¹™Input = document.getElementById('ë°˜ì˜ê·œì¹™');
  ë°˜ì˜ê·œì¹™Input.value = rule;
  
  if (rule === 'mix') {

    document.getElementById('ë°˜ì˜ê³¼ëª©ìˆ˜').value = '0';
    document.getElementById('ê³¼ëª©').value = '[]';
    document.getElementById('ë°˜ì˜ë¹„ìœ¨').value = '[]';
  }
}

// ë¹„ìœ¨ ë²„íŠ¼ ìƒì„± í•¨ìˆ˜
function createRatioButtons(containerId, targetInputId) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  
  // 10ë¶€í„° 90ê¹Œì§€ 10ë‹¨ìœ„ë¡œ ë²„íŠ¼ ìƒì„±
  for (let i = 10; i <= 90; i += 10) {
    const btn = document.createElement('button');
    btn.type = 'button'; // âœ… ì´ ì¤„ ì¶”ê°€
    btn.className = 'ratio-btn';
    btn.textContent = i;
    btn.onclick = () => addRatio(targetInputId, i);
    container.appendChild(btn);
  }
}

// ë¹„ìœ¨ ì¶”ê°€ í•¨ìˆ˜ (JSON ë°°ì—´ í˜•ì‹ìœ¼ë¡œ ì²˜ë¦¬)
function addRatio(inputId, ratio) {
  const input = document.getElementById(inputId);
  let current = [];
  try {
    current = JSON.parse(input.value || '[]');
  } catch (e) {
    current = [];
  }
  
  current.push(ratio);
  input.value = JSON.stringify(current);
}

const subjects = ['êµ­ì–´', 'ìˆ˜í•™', 'ì˜ì–´', 'íƒêµ¬', 'í•œêµ­ì‚¬'];

function setValue(id, value) {
  const el = document.getElementById(id);
  if (el) {
    el.value = value ?? ''; // nullì´ë“  undefinedë“  ''ë¡œ ì±„ì›Œì¤Œ
  } else {
    console.warn(`[ê²½ê³ ] id="${id}" input ìš”ì†Œ ì—†ìŒ (key=${id})`);
  }
}

function createSubjectButtons(targetInputId, containerId) {
  const container = document.getElementById(containerId);
  subjects.forEach(subj => {
    const btn = document.createElement('button');
    btn.innerText = subj;
    btn.type = 'button';
    btn.className = 'subject-btn';
    btn.onclick = () => addSubject(targetInputId, subj);
    container.appendChild(btn);
  });
}

function addSubject(inputId, subject) {
  const input = document.getElementById(inputId);
  let current = [];
  try { current = JSON.parse(input.value || '[]'); } catch (e) {}
  if (current.includes(subject)) {
    current = current.filter(item => item !== subject);
  } else {
    current.push(subject);
  }
  input.value = JSON.stringify(current);
}

let debugCheckStatus = {}; // ì²´í¬ì—¬ë¶€ ì €ì¥ìš©
console.log('debugCheckStatus', debugCheckStatus);

async function loadSchools() {
  const res = await fetch('https://supermax.kr/college/schools');
  const schoolsData = await res.json();
  const select = document.getElementById('schoolSelect');
  select.innerHTML = '';

  // ê¸°ë³¸ ì˜µì…˜ ì¶”ê°€
  const defaultOption = document.createElement('option');
  defaultOption.value = '';
  defaultOption.textContent = 'í•™êµë¥¼ ì„ íƒí•˜ì„¸ìš”';
  select.appendChild(defaultOption);

  for (const s of schoolsData.schools) {
    const option = document.createElement('option');
    option.value = s.ëŒ€í•™í•™ê³¼ID;

    // ì—¬ê¸°ì„œ get-school-detail ì¡°íšŒ
    let isSaved = false;
    try {
      const detailRes = await fetch(`https://supermax.kr/college/get-school-detail?ëŒ€í•™í•™ê³¼ID=${s.ëŒ€í•™í•™ê³¼ID}`);
      const detailData = await detailRes.json();
      if (detailData.success && detailData.data) {
        isSaved = true; // ì„¸ë¶€ì •ë³´ê°€ ì¡´ì¬í•˜ë©´ ì €ì¥ëœ í•™êµë¡œ í‘œì‹œ
      }
    } catch (e) {
      console.error('ì„¸ë¶€ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', s.ëŒ€í•™ëª…, s.í•™ê³¼ëª…, e);
    }

    option.textContent = (isSaved ? 'âœ… ' : '') + `${s.ëŒ€í•™ëª…} - ${s.í•™ê³¼ëª…}`;
    select.appendChild(option);
  }
}

async function loadSchoolDetail(id) {
  try {
    const res = await fetch(`https://supermax.kr/college/get-school-detail?ëŒ€í•™í•™ê³¼ID=${id}`);
    const data = await res.json();
    if (data.success) {
      const { íƒêµ¬, ë°˜ì˜ } = data.data;
      for (const key in íƒêµ¬) setValue(key, íƒêµ¬[key]);
      for (const key in ë°˜ì˜) setValue(key, ë°˜ì˜[key]);
    }
  } catch (e) { console.error('ë¡œë“œ ì‹¤íŒ¨', e); }
}

function clearForm() {
  document.querySelectorAll('input').forEach(el => el.value = '');
}

async function submitForm(e) {
  e.preventDefault();
  const form = document.getElementById('detailInputForm');
  const payload = {};

  form.querySelectorAll('input').forEach(el => {
    payload[el.id] = el.value;
  });

  payload['ëŒ€í•™í•™ê³¼ID'] = document.getElementById('schoolSelect').value;

  try {
    const res = await fetch('https://supermax.kr/college/school-detail', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
    const data = await res.json();
    alert(data.message || 'âœ… ì €ì¥ì™„ë£Œ');
    clearForm();
    loadSchools(); // ì €ì¥ í›„ í•™êµ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
  } catch (e) {
    alert('âŒ ì €ì¥ ì‹¤íŒ¨');
  }
}

// ì´ˆê¸° ì„¸íŒ…
loadSchools();
createSubjectButtons('ê³¼ëª©', 'ê³¼ëª©ë²„íŠ¼');
createSubjectButtons('ê·¸ë£¹1_ê³¼ëª©', 'ê·¸ë£¹1ë²„íŠ¼');
createSubjectButtons('ê·¸ë£¹2_ê³¼ëª©', 'ê·¸ë£¹2ë²„íŠ¼');
createSubjectButtons('ê·¸ë£¹3_ê³¼ëª©', 'ê·¸ë£¹3ë²„íŠ¼');

// ë¹„ìœ¨ ë²„íŠ¼ ìƒì„±
createRatioButtons('ratioButtons', 'ë°˜ì˜ë¹„ìœ¨');
createRatioButtons('ratioButtonsGroup1', 'ê·¸ë£¹1_ë°˜ì˜ë¹„ìœ¨');
createRatioButtons('ratioButtonsGroup2', 'ê·¸ë£¹2_ë°˜ì˜ë¹„ìœ¨');
createRatioButtons('ratioButtonsGroup3', 'ê·¸ë£¹3_ë°˜ì˜ë¹„ìœ¨');

document.getElementById('detailInputForm').addEventListener('submit', submitForm);
document.getElementById('schoolSelect').addEventListener('change', (e) => {
  const id = e.target.value;
  clearForm();
  if (id) {
    document.getElementById('detailForm').style.display = 'block';
    loadSchoolDetail(id);
  } else {
    document.getElementById('detailForm').style.display = 'none';
    clearForm();
  }
});
</script>
</body>
</html>